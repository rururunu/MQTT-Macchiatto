<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MQTT Macchiatto - ä¼˜é›…çš„Spring Boot MQTTå°è£…å·¥å…·</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Prism.js è¯­æ³•é«˜äº® -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css"
        rel="stylesheet">
</head>

<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="MQTT-Macchiatto-Logo.svg" alt="MQTT Macchiatto Logo" class="logo-image">
            </div>
            <ul class="nav-menu">
                <li><a href="#home" data-i18n="nav.home">é¦–é¡µ</a></li>
                <li><a href="#features" data-i18n="nav.features">ç‰¹æ€§</a></li>
                <li><a href="#quickstart" data-i18n="nav.quickstart">å¿«é€Ÿå¼€å§‹</a></li>
                <li><a href="#examples" data-i18n="nav.examples">ä»£ç ç¤ºä¾‹</a></li>
                <li><a href="#contact" data-i18n="nav.contact">è”ç³»</a></li>
            </ul>
            <div class="language-selector">
                <button class="lang-btn active" data-lang="zh">ä¸­æ–‡</button>
                <button class="lang-btn" data-lang="en">English</button>
            </div>
        </div>
    </nav>

    <!-- ä¸»é¡µé¢ -->
    <section id="home" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-title">
                    <img src="MQTT-Macchiatto-Logo.svg" alt="MQTT Macchiatto Logo" class="hero-logo">
                    <div class="hero-text">
                        <h1 class="hero-main-title">MQTT Macchiatto</h1>
                        <p class="hero-subtitle" data-i18n="hero.subtitle">Spring Boot ä¸‹ä¼˜é›…çš„ MQTT æ¶ˆæ¯é€šä¿¡å°è£…å·¥å…·</p>
                    </div>
                </div>
                <p class="hero-description" data-i18n="hero.description">è®©ä½ çš„å¼€å‘åƒä¸€æ¯ç›å¥‡æœµä¸€æ ·é¡ºæ»‘</p>

                <div class="hero-badges">
                    <img src="https://img.shields.io/maven-central/v/io.github.rururunu/MQTT-Macchiatto"
                        alt="Maven Central">
                    <img src="https://img.shields.io/github/license/rururunu/MQTT-Macchiatto" alt="License">
                    <img src="https://img.shields.io/github/stars/rururunu/MQTT-Macchiatto?style=social" alt="Stars">
                </div>

                <div class="hero-buttons">
                    <a href="#quickstart" class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        <span data-i18n="hero.quickstart">å¿«é€Ÿå¼€å§‹</span>
                    </a>
                    <a href="docs.html" class="btn btn-secondary">
                        <i class="fas fa-book"></i>
                        <span data-i18n="hero.docs">ä½¿ç”¨æ–‡æ¡£</span>
                    </a>
                    <a href="https://github.com/rururunu/MQTT-Macchiatto" class="btn btn-secondary">
                        <i class="fab fa-github"></i>
                        GitHub
                    </a>
                </div>
            </div>

            <div class="hero-code">
                <div class="code-window">
                    <div class="code-header">
                        <div class="code-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span class="code-title">MqttExample.java</span>
                    </div>
                    <div class="code-content">
                        <pre class="line-numbers"><code class="language-java">// æ¥æ”¶æ¶ˆæ¯ - ä»…éœ€ä¸€è¡Œä»£ç 
MqttPut.of("rsp/")
    .response((topic, message) -> {
        System.out.println("æ”¶åˆ°æ¶ˆæ¯: " + message);
    }).start();

// å‘å¸ƒæ¶ˆæ¯ - ç®€æ´ä¼˜é›…
MqttPush mqttPush = new MqttPush();
mqttPush.push("your/topic", "Hello MQTT", 
              MQTTQos.AT_LEAST_ONCE);</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ç‰¹æ€§ä»‹ç» -->
    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title" data-i18n="features.title">ä¸ºä»€ä¹ˆé€‰æ‹© MQTT Macchiattoï¼Ÿ</h2>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3 data-i18n="features.fast.title">å¿«é€Ÿé›†æˆ</h3>
                    <p data-i18n="features.fast.desc">ä»…éœ€å‡ è¡Œé…ç½®å³å¯å¯åŠ¨ MQTT é€šä¿¡ï¼Œå‘Šåˆ«ç¹ççš„æ ·æ¿ä»£ç </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <h3 data-i18n="features.encapsulation.title">é«˜åº¦å°è£…</h3>
                    <p data-i18n="features.encapsulation.desc">å±è”½å¤æ‚çš„ API è°ƒç”¨ï¼Œæä¾›ç®€æ´æ˜äº†çš„æ¥å£è®¾è®¡</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-plug"></i>
                    </div>
                    <h3 data-i18n="features.flexible.title">çµæ´»æ‰©å±•</h3>
                    <p data-i18n="features.flexible.desc">æ”¯æŒå¤šæœåŠ¡è¿æ¥å’Œæ‰‹åŠ¨é…ç½®ï¼Œæ»¡è¶³å„ç§å¤æ‚åœºæ™¯</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <h3 data-i18n="features.reconnect.title">è‡ªåŠ¨é‡è¿</h3>
                    <p data-i18n="features.reconnect.desc">å†…ç½®æ–­çº¿é‡è¿æœºåˆ¶ï¼Œè®©è¿æ¥æ›´åŠ ç¨³å®šå¯é </p>
                </div>
            </div>

            <div class="comparison">
                <div class="comparison-item">
                    <h3 class="comparison-title bad" data-i18n="features.comparison.native">ä½¿ç”¨åŸç”Ÿ MQTT ğŸ˜°</h3>
                    <ul class="comparison-list" id="native-issues">
                        <li><i class="fas fa-times"></i> <span data-i18n="features.comparison.native_issues.0">å¤šå±‚å›è°ƒé…ç½®</span></li>
                        <li><i class="fas fa-times"></i> <span data-i18n="features.comparison.native_issues.1">é”™è¯¯å¤„ç†ç¹ç</span></li>
                        <li><i class="fas fa-times"></i> <span data-i18n="features.comparison.native_issues.2">å¤šæœåŠ¡è¿æ¥å›°éš¾</span></li>
                        <li><i class="fas fa-times"></i> <span data-i18n="features.comparison.native_issues.3">ä»£ç å†—ä½™å¤æ‚</span></li>
                    </ul>
                </div>

                <div class="comparison-item">
                    <h3 class="comparison-title good" data-i18n="features.comparison.macchiatto">ä½¿ç”¨ MQTT Macchiatto ğŸ˜Š</h3>
                    <ul class="comparison-list" id="macchiatto-benefits">
                        <li><i class="fas fa-check"></i> <span data-i18n="features.comparison.macchiatto_benefits.0">ä¸€è¡Œé…ç½®è¿æ¥æœåŠ¡</span></li>
                        <li><i class="fas fa-check"></i> <span data-i18n="features.comparison.macchiatto_benefits.1">é«˜åº¦å°è£…çš„å·¥å…·ç±»</span></li>
                        <li><i class="fas fa-check"></i> <span data-i18n="features.comparison.macchiatto_benefits.2">æ¸…æ™°çš„ä»£ç ç»„ç»‡</span></li>
                        <li><i class="fas fa-check"></i> <span data-i18n="features.comparison.macchiatto_benefits.3">ä¼˜é›…çš„å“åº”å¤„ç†</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    
    <!-- å¿«é€Ÿå¼€å§‹ -->
        <section id="quickstart" class="quickstart">
            <div class="container">
                <h2 class="section-title" data-i18n="quickstart.title">å¿«é€Ÿå¼€å§‹</h2>

                <div class="quickstart-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3 data-i18n="quickstart.step1.title">æ·»åŠ ä¾èµ–</h3>
                            <div class="code-block">
                                <pre class="line-numbers"><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;io.github.rururunu&lt;/groupId&gt;
    &lt;artifactId&gt;MQTT-Macchiatto&lt;/artifactId&gt;
    &lt;version&gt;0.1.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3 data-i18n="quickstart.step2.title">é…ç½® application.yml</h3>
                            <div class="code-block">
                                <pre class="line-numbers"><code class="language-yaml">mto-mqtt:
    host: tcp://your-host:1883
    username: your-username
    password: your-password
    timeout: 10000
    keepalive: 60
    reconnect-frequency-ms: 5000</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3 data-i18n="quickstart.step3.title">å¯åŠ¨ç±»é…ç½®</h3>
                            <div class="code-block">
                                <pre class="line-numbers"><code class="language-java">@SpringBootApplication(
    scanBasePackages = {
        "your.project.path",
        "io.github.rururunu"
    }
)</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä»£ç ç¤ºä¾‹ -->
        <section id="examples" class="examples">
            <div class="container">
                <h2 class="section-title" data-i18n="examples.title">ä¼˜ç§€ä»£ç ç¤ºä¾‹</h2>

                <div class="examples-tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="listen" data-i18n="examples.tabs.listen">æ¶ˆæ¯ç›‘å¬</button>
                        <button class="tab-btn" data-tab="publish" data-i18n="examples.tabs.publish">æ¶ˆæ¯å‘å¸ƒ</button>
                        <button class="tab-btn" data-tab="advanced" data-i18n="examples.tabs.advanced">é«˜çº§ç”¨æ³•</button>
                    </div>

                    <div class="tab-content">
                        <div class="tab-panel active" id="listen">
                            <h3 data-i18n="examples.listen_title">æ¶ˆæ¯ç›‘å¬ - ç®€æ´ä¼˜é›…</h3>
                            <div class="code-example">
                                <pre class="line-numbers"><code class="language-java">// åŸºç¡€ç›‘å¬ - ä¸€è¡Œä»£ç æå®š
MqttPut.of("rsp/")
    .response((topic, message) -> {
        System.out.println("æ”¶åˆ°æ¶ˆæ¯: " + message);
        // åœ¨è¿™é‡Œå¤„ç†ä½ çš„ä¸šåŠ¡é€»è¾‘
    }).start();

// å¸¦é…ç½®çš„ç›‘å¬
MqttPut.of()
    .setTopic("sensor/data")
    .setServiceId("sensor-service")
    .setCleanSession(true)
    .response((message) -> {
        // å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®
        processSensorData(message);
    })
    .start();

// è‡ªå®šä¹‰æœåŠ¡ç›‘å¬
MqttPut.of("iot/devices/")
    .host("tcp://iot.example.com:1883")
    .username("iot-user")
    .password("secure-password")
    .timeout(10000)
    .keepalive(60)
    .cleanSession(false)
    .reconnectFrequencyMs(5000)
    .response((topic, msg) -> {
        System.out.println("è®¾å¤‡æ¶ˆæ¯: " + topic + " -> " + msg);
    })
    .start();</code></pre>
                            </div>
                        </div>

                        <div class="tab-panel" id="publish">
                            <h3 data-i18n="examples.publish_title">æ¶ˆæ¯å‘å¸ƒ - åŠŸèƒ½å¼ºå¤§</h3>
                            <div class="code-example">
                                <pre class="line-numbers"><code class="language-java">// ç®€å•å‘å¸ƒ
MqttPush mqttPush = new MqttPush();
mqttPush.push("device/status", "online", MQTTQos.AT_LEAST_ONCE);

// å¸¦å›è°ƒçš„å‘å¸ƒ
mqttPush.push("sensor/temperature", "25.6Â°C", 
    MQTTQos.AT_LEAST_ONCE,
    token -> System.out.println("æ¸©åº¦æ•°æ®å‘é€æˆåŠŸ"),
    (token, throwable) -> System.err.println("å‘é€å¤±è´¥: " + throwable)
);

// ä½¿ç”¨ Builder æ¨¡å¼è‡ªå®šä¹‰è¿æ¥
MqttPush customPush = new MqttPush.builder()
    .host("tcp://production.mqtt.com:1883")
    .username("prod-user")
    .password("prod-password")
    .timeout(15000)
    .keepalive(120)
    .cleanSession(false)
    .build()
    .init((e) -> {
        System.out.println("MQTT è¿æ¥å¤±è´¥: " + e);
    });

// å‘å¸ƒå…³é”®ä¸šåŠ¡æ•°æ®
customPush.push("business/orders", orderJson, 
    MQTTQos.EXACTLY_ONCE,
    (token) -> logSuccess("è®¢å•æ•°æ®å·²å‘é€"),
    (token, error) -> handleError("è®¢å•å‘é€å¤±è´¥", error)
);

// é•¿è¿æ¥å‘å¸ƒç¤ºä¾‹
@Component
public class DeviceController {
    private MqttPush mqttPush = new MqttPush();
    
    public void reportDeviceStatus(String deviceId, String status) {
        mqttPush.push("devices/" + deviceId + "/status", 
                     status, MQTTQos.AT_LEAST_ONCE);
    }
}</code></pre>
                            </div>
                        </div>

                        <div class="tab-panel" id="advanced">
                            <h3 data-i18n="examples.advanced_title">é«˜çº§ç”¨æ³• - ä¼ä¸šçº§ç‰¹æ€§</h3>
                            <div class="code-example">
                                <pre class="line-numbers"><code class="language-java">// å¤šæœåŠ¡è¿æ¥ç®¡ç†
@Service
public class MqttService {
    
    // ç”Ÿäº§ç¯å¢ƒè¿æ¥
    private MqttPush productionPush = new MqttPush()
        .host("tcp://prod.mqtt.com:1883")
        .username("prod-user")
        .password("prod-pass")
        .cleanSession(false)
        .reconnectFrequencyMs(3000);
    
    // æµ‹è¯•ç¯å¢ƒè¿æ¥
    private MqttPush testPush = new MqttPush()
        .host("tcp://test.mqtt.com:1883")
        .username("test-user")
        .password("test-pass");
    
    @PostConstruct
    public void init() {
        productionPush.start();
        testPush.start();
    }
}

// ä½¿ç”¨ MQTTMonitor è¿›è¡Œé«˜çº§ç›‘å¬
MQTTMonitor monitor = new MQTTMonitor();
monitor.setClientId("advanced-client-" + UUID.randomUUID());
monitor.setCleanSession(false);
monitor.setQos(MQTTQos.EXACTLY_ONCE);

monitor.setMqttCallback(new MqttCallback() {
    @Override
    public void connectionLost(Throwable cause) {
        System.err.println("è¿æ¥ä¸¢å¤±ï¼Œæ­£åœ¨é‡è¿...");
        monitor.reconnect(); // è‡ªåŠ¨é‡è¿
    }

    @Override
    public void messageArrived(String topic, MqttMessage message) {
        // å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯
        String payload = new String(message.getPayload());
        System.out.println("é«˜çº§ç›‘å¬æ”¶åˆ°: " + topic + " -> " + payload);
        
        // æ ¹æ®ä¸»é¢˜è·¯ç”±åˆ°ä¸åŒçš„å¤„ç†å™¨
        if (topic.startsWith("alerts/")) {
            handleAlert(payload);
        } else if (topic.startsWith("metrics/")) {
            handleMetrics(payload);
        }
    }

    @Override
    public void deliveryComplete(IMqttDeliveryToken token) {
        System.out.println("æ¶ˆæ¯æŠ•é€’å®Œæˆ");
    }
});

// å¯åŠ¨é«˜çº§ç›‘å¬
monitor.start("system/+/status"); // ä½¿ç”¨é€šé…ç¬¦ç›‘å¬</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- è”ç³»ä¿¡æ¯ -->
        <section id="contact" class="contact">
            <div class="container">
                <h2 class="section-title" data-i18n="contact.title">è”ç³»æˆ‘</h2>

                <div class="contact-content">
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h3 data-i18n="contact.email">é‚®ç®±</h3>
                                <p>guolvaita@gmail.com</p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <i class="fab fa-weixin"></i>
                            <div>
                                <h3 data-i18n="contact.wechat">å¾®ä¿¡</h3>
                                <p>AfterTheMoonlight</p>
                            </div>
                        </div>

                        <div class="contact-item">
                            <i class="fab fa-github"></i>
                            <div>
                                <h3 data-i18n="contact.github">GitHub</h3>
                                <p><a href="https://github.com/rururunu/MQTT-Macchiatto">rururunu/MQTT-Macchiatto</a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="support-section">
                        <h3 data-i18n="contact.support.title">æ”¯æŒé¡¹ç›®</h3>
                        <p data-i18n="contact.support.desc">å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ä¸è¦åå•¬ç‚¹ä¸€ä¸ª â­ Starï¼Œè¿™æ˜¯æˆ‘æŒç»­ä¼˜åŒ–çš„æœ€å¤§åŠ¨åŠ›ï¼</p>
                        <a href="https://github.com/rururunu/MQTT-Macchiatto" class="btn btn-primary">
                            <i class="fas fa-star"></i>
                            <span data-i18n="contact.support.button">ç»™ä¸ª Star</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- é¡µè„š -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-left">
                        <div class="footer-logo">
                            <img src="MQTT-Macchiatto-Logo.svg" alt="MQTT Macchiatto Logo" class="footer-logo-image">
                        </div>
                        <p data-i18n="footer.slogan">è®© MQTT å¼€å‘åƒä¸€æ¯ç›å¥‡æœµä¸€æ ·é¡ºæ»‘</p>
                    </div>

                    <div class="footer-links">
                        <div class="footer-column">
                            <h4 data-i18n="footer.links">é¡¹ç›®é“¾æ¥</h4>
                            <ul>
                                <li><a href="https://github.com/rururunu/MQTT-Macchiatto">GitHub</a></li>
                                <li><a href="https://gitee.com/guolvaita/mqtt-macchiatto">Gitee</a></li>
                                <li><a href="https://central.sonatype.com/artifact/io.github.rururunu/MQTT-Macchiatto">Maven
                                        Central</a></li>
                            </ul>
                        </div>

                        <div class="footer-column">
                            <h4 data-i18n="footer.docs">æ–‡æ¡£</h4>
                            <ul>
                                <li><a href="#quickstart" data-i18n="footer.quickstart">å¿«é€Ÿå¼€å§‹</a></li>
                                <li><a href="#examples" data-i18n="footer.examples">ä»£ç ç¤ºä¾‹</a></li>
                                <li><a href="https://github.com/rururunu/MQTT-Macchiatto/blob/main/README_ZH.md" data-i18n="footer.chinese_docs">ä¸­æ–‡æ–‡æ¡£</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p data-i18n="footer.copyright">&copy; 2024 MQTT Macchiatto. Licensed under Apache License 2.0</p>
                </div>
            </div>
        </footer>

        <!-- Prism.js è¯­æ³•é«˜äº®åº“ -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
        <script src="i18n.js"></script>
        <script src="script.js"></script>
</body>

</html>